{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IdeaBoard</title>

    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}"/>
    <link rel="stylesheet" type="text/css" href="{% static 'css/login.css' %}"/>
    <link rel="stylesheet" type="text/css" href="{% static 'css/ideaBoard.css' %}"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <script>
   
        document.addEventListener('DOMContentLoaded', function() {
            var elems = document.querySelectorAll('.dropdown-trigger');
            var instances = M.Dropdown.init(elems);
        });

        var cards = []

        $( document ).ready(function() {
            $('.card-title').each(function(i, obj) {                
                var key = $(obj).html()
                cards.push({ [key] : $(obj).closest(".col")})
                
            });

            $("#filterByTitle").on("input", function(){
                var input = $(this).val().toLowerCase()
                
                var filteredCards = cards.filter((item)=>{
                    return Object.keys(item)[0].toLowerCase().includes(input)
                });

                $.each(cards, function(key, value) {
                    console.log($(Object.values(value)[0]))
                    $(Object.values(value)[0]).hide()
                })

                $.each(filteredCards, function (i, item) {
                    $(Object.values(item)[0]).show()
                });
            })
        })
    </script>

</head>
<body>
    <div class="pageContainer">
        <nav>
            <div class="nav-wrapper teal">
              <a href="#" class="brand-logo"><img style="margin-left:30px;width: 145px;" src="../static/img/Logo.svg"/></a>
              <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li><a  href="/ideaBoard/all">All Ideas</a></li>
                <li><a  href="/ideaBoard/own">My Ideas</a></li>
                <li><a  href="c/profile">Profile</a></li>
                <li><a  href="{% url 'logout' %}" type="submit">Log out</a></li>
              </ul>
            </div>
          </nav>
        
        <div class="ideasContainer">

            <div class="filteringContainer">
                <input placeholder="Placeholder" id="filterByTitle" type="text" class="validate">
                
                <div class="categoryDropDown">
                    <!-- Dropdown Trigger -->
                    <a class='dropdown-trigger btn' href='#' data-target='dropdown1'>Drop Me!</a>

                    <!-- Dropdown Structure -->
                    <ul id='dropdown1' class='dropdown-content'>
                        <li><a href="#!">one</a></li>
                        <li><a href="#!">two</a></li>
                        <li class="divider" tabindex="-1"></li>
                        <li><a href="#!">three</a></li>
                        <li><a href="#!"><i class="material-icons">view_module</i>four</a></li>
                        <li><a href="#!"><i class="material-icons">cloud</i>five</a></li>
                    </ul>
                </div>
            </div>




            {% if "own" in request.path %}
            <h2 style="vertical-align: middle; display:inline">Your Ideas</h2>
            <a style="float: right; display:inline;" class="btn-floating btn-large waves-effect waves-light teal" href="{% url 'addIdea' %}" type="submit"><i class="material-icons">add</i></a>
            {% endif %}

            <div class="row">
                {% if ideas %}
                {% for idea in ideas %}
                <div class="col s8 m4">

                  <div class="card darken-1">
                    <div onclick="window.location='/ideaDetails/{{ idea.id }}';" class="card-content">
                      <span class="card-title">{{ idea.name }}</span>
                      <span class="category-card">{{ idea.category }}</span>
                      <p class="abstract-card">{{ idea.content|truncatechars:30 }}.</p>
                      <span class="author-card">by <span style="font-weight: bold;">{{ idea.author }}</span></span>
                    </div>
                  </div>

                </div>
                {% endfor %}
                {% endif %}
            </div> 
        </div>
    </div>

     
    </div>
    
        

</body>
</html>